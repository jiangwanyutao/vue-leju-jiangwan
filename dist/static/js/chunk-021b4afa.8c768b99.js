(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-021b4afa"],{"1b62":function(e,t,a){"use strict";var s=a("03e8");t["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(e){this.page.size=e,this.page.currentPage=1,this.init()},handleCurrentChange:function(e){this.page.currentPage=e,this.init()}},computed:{headers:function(){var e=Object(s["b"])(),t={token:e};return t}}}},3449:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"orderDetail_main",attrs:{"element-loading-text":e.loadingOption.text,"element-loading-spinner":e.loadingOption.spinner,"element-loading-background":e.loadingOption.background}},[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v(" 订单信息: "),a("span",{staticStyle:{"margin-left":"10px"}},[0===e.status?a("el-tag",{attrs:{type:"danger",size:"small",effect:"dark"}},[e._v(" "+e._s(e.statusList[e.status].name)+" ")]):1===e.status?a("el-tag",{attrs:{size:"small",type:"warning",effect:"dark"}},[e._v(" "+e._s(e.statusList[e.status].name)+" ")]):2===e.status?a("el-tag",{attrs:{size:"small"}},[e._v(" "+e._s(e.statusList[e.status].name)+" ")]):3===e.status?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v(" "+e._s(e.statusList[e.status].name)+" ")]):e._e()],1)]),a("div",{staticClass:"orderlist"},[a("span",[e._v("订单:"+e._s(e.detailObj.orderSn)+" "),a("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:e.goOrderDetail}},[e._v("查看订单详情")])]),a("span",[e._v("退单人姓名:"+e._s(e.detailObj.returnName))]),a("span",[e._v("退单理由:"+e._s(e.detailObj.reason))]),a("span",[e._v("退单描述:"+e._s(e.detailObj.description))])]),a("div",{staticClass:"orderlist"},[a("span",[e._v("申请时间::"+e._s(e.detailObj.createTime))])]),e.imgList.length>0?a("div",{staticClass:"img_main"},[a("div",{staticClass:"left"},[e._v("退单图片:")]),a("div",{staticClass:"right"},e._l(e.imgList,(function(t,s){return a("el-image",{key:s,staticStyle:{width:"100px",height:"100px","margin-right":"20px"},attrs:{src:t,"preview-src-list":e.imgList}})})),1)]):e._e()]),a("el-divider"),a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v("退货商品:")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.productList,border:""}},[a("el-table-column",{attrs:{label:"商品图片",width:"250"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"table_img",attrs:{src:e.row.productPic}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.productName))]),a("p",[e._v("品牌: "+e._s(t.row.productBrand))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品价格",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.productRealPrice))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"productAttr",label:"商品属性",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.productAttr[0].key)+" : "+e._s(t.row.productAttr[0].value))]),t.row.productAttr[1]?a("p",[e._v(e._s(t.row.productAttr[1].key)+" : "+e._s(t.row.productAttr[1].value))]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"productCount",label:"商品数量",width:"250"}}),a("el-table-column",{attrs:{align:"center",prop:"returnAmount",label:"总计"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.returnAmount))])]}}])})],1)],1),a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v("用户信息:")]),a("div",{staticClass:"orderlist"},[a("span",[e._v("联系人: "+e._s(e.detailObj.returnName))]),a("span",[e._v("联系电话: "+e._s(e.detailObj.returnPhone))])])]),a("el-divider"),a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v("费用信息:")]),a("div",{staticClass:"orderlist"},[a("span",[e._v("退单金额: "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.detailObj.returnAmount)+"元")])]),a("span",[e._v("运费金额: 0")])]),0===e.status?a("div",{style:{width:"100%",margin:"10px auto",fontSize:"16px"}},[a("el-form",{ref:"handleForm",staticClass:"form-lable",attrs:{model:e.handleForm,rules:e.handleRules,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{prop:"returnAmount",label:"退款金额"}},[a("el-input-number",{staticClass:"myInput",attrs:{placeholder:"",size:"mini"},model:{value:e.handleForm.returnAmount,callback:function(t){e.$set(e.handleForm,"returnAmount",t)},expression:"handleForm.returnAmount"}})],1)],1),a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{prop:"handleMan",label:"处理人"}},[a("el-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.handleForm.handleMan,callback:function(t){e.$set(e.handleForm,"handleMan",t)},expression:"handleForm.handleMan"}})],1)],1),a("el-col",{attrs:{span:8,offset:0}},[a("el-form-item",{attrs:{prop:"handleNote",label:"处理备注"}},[a("el-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.handleForm.handleNote,callback:function(t){e.$set(e.handleForm,"handleNote",t)},expression:"handleForm.handleNote"}})],1)],1)],1)],1)],1):e._e()]),e.status>0?a("el-divider"):e._e(),0!==e.status?a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v("处理结果:")]),a("div",{staticClass:"orderlist"},[a("span",[e._v("处理人:"+e._s(e.detailObj.handleMan))]),a("span",[e._v("处理备注:"+e._s(e.detailObj.handleNote))]),a("span",[e._v("退单时间:"+e._s(e.detailObj.handleTime))])])]):e._e(),1===e.status?a("div",{style:{width:"100%",margin:"10px auto",fontSize:"16px"}},[a("el-form",{ref:"receiveForm",staticClass:"form-lable",attrs:{model:e.receiveForm,rules:e.receiveRules,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,offset:0}},[a("el-form-item",{attrs:{label:"收货人",prop:"receiveMan"}},[a("el-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.receiveForm.receiveMan,callback:function(t){e.$set(e.receiveForm,"receiveMan",t)},expression:"receiveForm.receiveMan"}})],1)],1),a("el-col",{attrs:{span:6,offset:0}},[a("el-form-item",{attrs:{label:"收货备注",prop:"receiveNote"}},[a("el-input",{staticClass:"myInput myInput2",attrs:{type:"text",placeholder:"",size:"mini"},model:{value:e.receiveForm.receiveNote,callback:function(t){e.$set(e.receiveForm,"receiveNote",t)},expression:"receiveForm.receiveNote"}})],1)],1)],1)],1)],1):e._e(),e.status>1?a("el-divider"):e._e(),2===e.status?a("div",{staticClass:"table-main"},[a("div",{staticClass:"table-title"},[e._v("收货信息:")]),a("div",{staticClass:"orderlist"},[a("span",[e._v("退单收货人:"+e._s(e.detailObj.receiveMan))]),a("span",[e._v("退单收货备注:"+e._s(e.detailObj.receiveNote))]),a("span",[e._v("退单收货时间:"+e._s(e.detailObj.receiveTime))])])]):e._e(),a("div",{staticClass:"button_main"},[0===e.status?a("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.agreeReturn}},[e._v("同意退款 ")]):e._e(),1===e.status?a("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.receiveReturn}},[e._v("确认收货 ")]):e._e(),0===e.status?a("el-button",{staticStyle:{width:"150px"},attrs:{size:"small"},on:{click:e.rejectReturn}},[e._v("拒绝退款 ")]):e._e()],1)],1)],1)},i=[],r=(a("ac1f"),a("1276"),a("b775"));function n(e){return Object(r["a"])({url:"/lejuAdmin/orderReturn/".concat(e)})}var l=a("1b62"),o={name:"OrderBackDetail",mixins:[l["a"]],data:function(){return{pageLoading:!1,id:"",status:-1,detailObj:{},orderTableData:[],userTableData:[],costData:[],resultData:[],receiveData:[],productList:[],imgList:[],statusList:[{name:"待处理",id:0},{name:"退货中",id:1},{name:"已完成",id:2},{name:"已拒绝",id:3}],handleForm:{returnAmount:0,handleNote:"",handleMan:""},receiveForm:{receiveNote:"",receiveMan:""},handleRules:{handleMan:[{required:!0,message:"处理人姓名",trigger:"blur"}],handleNote:[{required:!0,message:"处理人备注",trigger:"blur"}]},receiveRules:{receiveMan:[{required:!0,message:"收货人姓名",trigger:"blur"}],receiveNote:[{required:!0,message:"收货人备注",trigger:"blur"}]}}},computed:{},created:function(){this.id=this.$route.params.id,this.init()},methods:{init:function(){var e=this;this.pageLoading=!0,n(this.id).then((function(t){t.success&&(e.detailObj=t.data.orderReturnApply,e.status=e.detailObj.status,e.initImgs(),e.initProductTable()),e.pageLoading=!1}))},initProductTable:function(){var e={productPic:this.detailObj.productPic,productName:this.detailObj.productName,productAttr:JSON.parse(this.detailObj.productAttr),productCount:this.detailObj.productCount,productBrand:this.detailObj.productBrand,productRealPrice:this.detailObj.productRealPrice,returnAmount:this.detailObj.returnAmount};this.productList.push(e)},initImgs:function(){this.detailObj.proofPics&&(this.imgList=this.detailObj.proofPics.split(","))},agreeReturn:function(){var e=this;this.$refs.handleForm.validate((function(t){t?agreeApply(e.id,{id:e.id,handleMan:e.handleForm.handleMan,handleNote:e.handleForm.handleNote,returnAmount:e.handleForm.returnAmount}).then((function(t){t.success?(e.$message.success("成功"),e.init()):e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},receiveReturn:function(){var e=this;this.$refs.receiveForm.validate((function(t){t?receiveProduct(e.id,{id:e.id,receiveMan:e.receiveForm.receiveMan,receiveNote:e.receiveForm.receiveNote}).then((function(t){t.success?(e.$message.success("成功"),window.location.reload()):e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},rejectReturn:function(){var e=this;this.$refs.handleForm.validate((function(t){t?rejectApply(e.id,{id:e.id,handleMan:e.handleForm.handleMan,handleNote:e.handleForm.handleNote}).then((function(t){t.success?(e.$message.success("成功"),window.location.reload()):e.$message.error("请求失败")})):e.$message.warning("请填写必要信息")}))},goOrderDetail:function(){this.$router.push({name:"orderdetail",params:{id:this.detailObj.orderId}})}}},d=o,c=(a("deb4"),a("2877")),u=Object(c["a"])(d,s,i,!1,null,"39724249",null);t["default"]=u.exports},deb4:function(e,t,a){"use strict";a("f8c8")},f8c8:function(e,t,a){}}]);