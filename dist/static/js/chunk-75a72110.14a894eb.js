(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75a72110"],{"1b62":function(t,e,a){"use strict";var i=a("03e8");e["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.init()},handleCurrentChange:function(t){this.page.currentPage=t,this.init()}},computed:{headers:function(){var t=Object(i["b"])(),e={token:t};return e}}}},"290af":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ads_main"},[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goAdd}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.adsList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"left"}}),a("el-table-column",{attrs:{align:"center",label:"广告图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"时间",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("开始时间:"+t._s(e.row.startTime))]),a("p",[t._v("结束时间:"+t._s(e.row.endTime))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"广告名称",width:"250"}}),a("el-table-column",{attrs:{align:"center",prop:"clickCount",label:"点击数",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"orderCount",label:"下单数",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"轮播位置",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.type?a("p",[t._v("首页轮播")]):a("p",[t._v("其他")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"url",label:"链接地址",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note",label:"备注",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"上下线状态",width:180},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" "+t._s(1===e.row.status?"上线":"下线")+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDelete(e.row)}}},[a("span",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1),a("el-dialog",{attrs:{width:"65%",title:"广告详情",visible:t.open},on:{"update:visible":function(e){t.open=e},close:t.clear}},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{rules:t.rules,inline:!0,model:t.form,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",prop:"name",label:"广告名称"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"广告名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"备注"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"备注"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"排序"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"产品数量"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"产品数量"},model:{value:t.form.productCount,callback:function(e){t.$set(t.form,"productCount",e)},expression:"form.productCount"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"链接"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"首页轮播位置"}},[a("el-select",{staticClass:"search-input item_input",attrs:{size:"small",clearable:"",placeholder:"订单状态"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"APP首页轮播",value:"0"}}),a("el-option",{attrs:{label:"1",value:"1"}})],1)],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"上下线状态"}},[a("el-switch",{staticClass:"item_input",attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleBigPicSuccess}},[t.form.pic?a("img",{staticClass:"avatar",attrs:{src:t.form.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.open=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",loading:t.couldNext,type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)],1)},s=[],l=a("5530"),n=a("b775");function o(){return Object(n["a"])({url:"/lejuAdmin/advertise/adsList"})}function r(t){return Object(n["a"])({url:"/lejuAdmin/advertise/delAds/".concat(t),method:"DELETE"})}function c(t){return Object(n["a"])({url:"/lejuAdmin/advertise/addAds",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/lejuAdmin/advertise/updateAds",method:"post",data:t})}var d=a("1b62"),m={name:"MarketAdvertisement",mixins:[d["a"]],data:function(){return{adsList:[],loading:!1,open:!1,rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}]},couldNext:!1,detailObj:{},form:{pic:"",name:"",note:"",productCount:"",sort:"",url:"",status:0,type:"1",startTime:"",endTime:""}}},created:function(){this.getAdsList()},methods:{getAdsList:function(){var t=this;this.loading=!0,o().then((function(e){e.success?(t.loading=!1,t.adsList=e.data.items):(t.$message.error("获取列表失败"),t.loading=!1)}))},goDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r(t.id).then((function(t){t.success?(e.getAdsList(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.message)})).catch((function(t){e.$message.error(t.message)}))})).catch((function(t){console.log(t)}))},goAdd:function(){this.open=!this.open},goEdit:function(t){this.openDetail(t)},openDetail:function(t){this.detailObj=t,this.open=!0,this.detailObj?this.form=t:this.formReset()},handleBigPicSuccess:function(t,e){this.form.pic=t.data.fileUrl},formReset:function(){this.form=this.$options.data().form},clear:function(){this.form=this.$options.data().form},onSubmit:function(){var t=this;console.log(this.detailObj),this.$refs.form.validate((function(e){if(!e)return t.$message.error("请填写必要信息"),!1;t.$confirm("是否确认".concat(t.detailObj.id?"修改":"新增","广告?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.couldNext=!0,t.detailObj.id?u(Object(l["a"])({},t.form)).then((function(e){e.success?(t.open=!1,t.$emit("success"),t.formReset(),t.getAdsList()):t.$message.error("修改失败"),t.couldNext=!1})):c(Object(l["a"])({},t.form)).then((function(e){e.success?(t.open=!1,t.$emit("success"),t.formReset(),t.getAdsList()):t.$message.error("添加失败"),t.couldNext=!1}))})).catch((function(t){console.log(t)}))}))}}},f=m,p=(a("7a57"),a("2877")),h=Object(p["a"])(f,i,s,!1,null,"ced72216",null);e["default"]=h.exports},"7a57":function(t,e,a){"use strict";a("e916")},e916:function(t,e,a){}}]);