(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5370a4da"],{"1b62":function(t,e,a){"use strict";var s=a("03e8");e["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.init()},handleCurrentChange:function(t){this.page.currentPage=t,this.init()}},computed:{headers:function(){var t=Object(s["b"])(),e={token:t};return e}}}},"368e":function(t,e,a){"use strict";a("98b4")},"98b4":function(t,e,a){},bba1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brand_main"},[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goAdd}},[t._v("新增")])],1),a("el-dialog",{attrs:{width:"65%",title:"品牌详情",visible:t.open},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{rules:t.rules,inline:!0,model:t.form,"label-width":"150px"}},[a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",prop:"name",label:"品牌名称"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"品牌名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"首字母"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"首字母"},model:{value:t.form.firstLetter,callback:function(e){t.$set(t.form,"firstLetter",e)},expression:"form.firstLetter"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"排序"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"产品数量"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"产品数量"},model:{value:t.form.productCount,callback:function(e){t.$set(t.form,"productCount",e)},expression:"form.productCount"}})],1),a("br"),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"品牌故事"}},[a("el-input",{staticClass:"item_input",attrs:{placeholder:"品牌故事"},model:{value:t.form.brandStory,callback:function(e){t.$set(t.form,"brandStory",e)},expression:"form.brandStory"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"是否展示"}},[a("el-switch",{staticClass:"item_input",attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.showStatus,callback:function(e){t.$set(t.form,"showStatus",e)},expression:"form.showStatus"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"是否为品牌制造商"}},[a("el-switch",{staticClass:"item_input",attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.factoryStatus,callback:function(e){t.$set(t.form,"factoryStatus",e)},expression:"form.factoryStatus"}})],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"上传专区大图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleBigPicSuccess}},[t.form.bigPic?a("img",{staticClass:"avatar",attrs:{src:t.form.bigPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticStyle:{width:"45%"},attrs:{size:"mini",label:"上传Logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleLogoSuccess}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.couldNext,type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.brandList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"left"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"品牌名称",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"展示状态",width:180},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" 是否展示: "),a("el-switch",{attrs:{size:"small","active-value":1,"inactive-value":0},on:{change:function(a){return t.switchCode(e.row)}},model:{value:e.row.showStatus,callback:function(a){t.$set(e.row,"showStatus",a)},expression:"scope.row.showStatus"}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",label:"logo",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.logo}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"专区大图",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"table_img",attrs:{src:t.row.bigPic}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"brandStory",label:"品牌故事",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"300"}}),a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"productCommentCount",label:"产品评论数量",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"productCount",label:"产品数量",width:"150"}}),a("el-table-column",{attrs:{align:"center",label:"是否品牌制造商",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(1===e.row.factoryStatus?"是":"不是"))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDelete(e.row)}}},[a("span",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},i=[],o=a("5530"),n=a("b775");function r(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function l(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"DELETE"})}function c(t){return Object(n["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}var m=a("1b62"),f={name:"ProductBrand",mixins:[m["a"]],data:function(){return{brandList:[],loading:!1,couldNext:!1,rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}]},open:!1,form:{detailObj:"",bigPic:"",logo:"",name:"",firstLetter:"",sort:"",productCount:"",productCommentCount:"",showStatus:1,factoryStatus:1,brandStory:""}}},created:function(){this.init()},methods:{init:function(){var t=this;r(this.page.currentPage,this.page.size).then((function(e){e.success?(t.brandList=e.data.items,t.page.total=e.data.items.length):t.$message.error("获取列表失败")}))},doReset:function(){this.form=this.$options.data().form},doSearch:function(){console.log("搜索",this.page.currentPage)},switchCode:function(t){var e=this,a=0===t.showStatus?1:0;c({id:t.id+"",status:t.showStatus}).then((function(s){s.success?e.$message.success("修改状态成功"):(e.$message.error("修改状态失败"),t.showStatus=a)})).catch((function(s){t.showStatus=a,e.$message.error("修改状态失败")}))},goDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l(t.id).then((function(t){t.success?(e.init(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.message)})).catch((function(t){e.$message.error(t.message)}))})).catch((function(t){console.log("ss",t)}))},goAdd:function(){this.open=!this.open},goEdit:function(t){console.log(t),this.form=t,this.open=!0,this.detailObj=!0},handleBigPicSuccess:function(t,e){t.success?(this.form.bigPic=t.data.fileUrl,this.$message.success("上传成功")):this.$message.error("上传失败")},handleLogoSuccess:function(t,e){t.success?(this.form.logo=t.data.fileUrl,this.$message.success("上传成功")):this.$message.error("上传失败")},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message.error("请填写必要信息"),!1;t.$confirm("是否确认".concat(t.detailObj?"修改":"新增","品牌?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.couldNext=!0,t.detailObj?d(Object(o["a"])({},t.form)).then((function(e){e.success?(t.open=!1,t.$emit("success"),t.form=t.$options.data().form,t.init()):t.$message.error("修改失败"),t.couldNext=!1})):u(Object(o["a"])({},t.form)).then((function(e){e.success?(t.open=!1,t.$emit("success"),t.form=t.$options.data().form,t.init()):t.$message.error("添加失败"),t.couldNext=!1}))})).catch((function(t){console.log("quxiao")}))}))}}},p=f,h=(a("368e"),a("2877")),g=Object(h["a"])(p,s,i,!1,null,"6c9b4f8c",null);e["default"]=g.exports}}]);