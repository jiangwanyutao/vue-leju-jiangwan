(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd88f"],{8298:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address p_bottom"},[s("el-card",{staticClass:"box-card margin_30"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-button",{staticStyle:{float:"left"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增")])],1),s("el-dialog",{attrs:{title:"地址详情",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clear}},[s("el-form",{attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"发货方地址","label-width":e.formLabelWidth,prop:"addressName"}},[s("el-input",{staticClass:"width_300",attrs:{autocomplete:"off",size:"mini",placeholder:"发货方地址"},model:{value:e.form.addressName,callback:function(t){e.$set(e.form,"addressName",t)},expression:"form.addressName"}})],1),s("el-form-item",{attrs:{label:"发货人姓名","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"width_300",attrs:{autocomplete:"off",size:"mini",placeholder:"发货人姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"发货人手机号","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"width_300",attrs:{autocomplete:"off",size:"mini",placeholder:"发货人手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),s("el-form-item",{attrs:{label:"邮政编码","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"width_300",attrs:{autocomplete:"off",size:"mini",placeholder:"邮政编码"},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1),s("el-form-item",{attrs:{label:"收货地址","label-width":e.formLabelWidth}},[s("el-cascader",{staticClass:"width_300",attrs:{size:"mini",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),s("el-form-item",{attrs:{label:"详细地址","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"width_300",attrs:{autocomplete:"off",size:"mini",placeholder:"详细地址"},model:{value:e.form.detailAddress,callback:function(t){e.$set(e.form,"detailAddress",t)},expression:"form.detailAddress"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[s("el-table-column",{attrs:{type:"index",label:"#",width:"50",fixed:"left"}}),s("el-table-column",{attrs:{prop:"addressName",label:"地址名称",width:"120"}}),s("el-table-column",{attrs:{prop:"sendStatus",label:"默认发货地址",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认发货地址: "),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.switchStatus("sendStatus",t.row)}},model:{value:t.row.sendStatus,callback:function(s){e.$set(t.row,"sendStatus",s)},expression:"scope.row.sendStatus"}})]}}])}),s("el-table-column",{attrs:{prop:"name",label:"收货人姓名",width:"120"}}),s("el-table-column",{attrs:{prop:"phone",label:"收货人电话",width:"120"}}),s("el-table-column",{attrs:{prop:"detailAddress",label:"收货人地址",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(" "+e._s(t.row.province)+" "+e._s(t.row.city)+" "+e._s(t.row.region)+" ")]),s("p",[e._v(" "+e._s(t.row.detailAddress)+" ")])]}}])}),s("el-table-column",{attrs:{prop:"receiveStatus",label:"默认收货地址",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 默认收货地址:"),s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(s){return e.switchStatus("receiveStatus",t.row)}},model:{value:t.row.receiveStatus,callback:function(s){e.$set(t.row,"receiveStatus",s)},expression:"scope.row.receiveStatus"}})]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.edit(t.row)}}},[e._v("编辑")]),s("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(s){return e.goDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},i=[],a=(s("ac1f"),s("1276"),s("a15b"),s("b775"));function l(){return Object(a["a"])({url:"/lejuAdmin/companyAddress/addressList"})}function n(e){return Object(a["a"])({url:"/lejuAdmin/companyAddress/save",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/lejuAdmin/companyAddress/update",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/lejuAdmin/companyAddress/setReceiveOne",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/lejuAdmin/companyAddress/setSendOne",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/lejuAdmin/companyAddress/".concat(e),method:"DELETE"})}var m=s("ef6c"),f={data:function(){return{list:[],dialogFormVisible:!1,formLabelWidth:"100px",form:{addressName:"",city:"",cityCode:"",createTime:"",detailAddress:"",id:"",modifyTime:"",name:"",phone:"",postCode:"",province:"",receiveStatus:"",region:"",sendStatus:""},selectedOptions:"",options:m["regionDataPlus"],rules:{addressName:[{required:!0,message:"发货地址不能为空",trigger:"blur"}]},num:0}},methods:{init:function(){var e=this;l().then((function(t){e.list=t.data.items}))},switchStatus:function(e,t){var s=this,o=0===t[e]?1:0,i={};i[e]=t[e],i.id=t.id,"sendStatus"===e?d(i).then((function(i){i.success?(s.$message.success("修改状态成功"),s.init()):(t[e]=o,s.$message.error("修改状态失败"))})):c(i).then((function(i){i.success?(s.$message.success("修改状态成功"),s.init()):(t[e]=o,s.$message.error("修改状态失败"))}))},submit:function(){var e=this;this.form.addressName&&(1==this.num?r(this.form).then((function(t){console.log(t),e.dialogFormVisible=!e.dialogFormVisible,e.init()})):n(this.form).then((function(t){console.log(t),e.dialogFormVisible=!e.dialogFormVisible,e.init()})))},clear:function(){this.form=this.$options.data().form,this.selectedOptions=""},edit:function(e){this.dialogFormVisible=!this.dialogFormVisible,this.form=e,this.selectedOptions=e.cityCode.split(","),this.num=1},handleChange:function(e){console.log(e),this.form.province=m["CodeToText"][e[0]],this.form.city=m["CodeToText"][e[1]],this.form.region=m["CodeToText"][e[2]],this.form.cityCode=e.join(",")},goDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(e.id).then((function(e){e.success?(t.init(),t.$message({type:"success",message:"删除成功!"})):t.$message.error(e.message)})).catch((function(e){t.$message.error(e.message)}))})).catch((function(e){console.log(e)}))}},computed:{},created:function(){this.init()},mounted:function(){}},p=f,h=s("2877"),b=Object(h["a"])(p,o,i,!1,null,"fa2a5566",null);t["default"]=b.exports}}]);