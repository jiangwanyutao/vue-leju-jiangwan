(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47713b15"],{"0b20":function(t,e,a){"use strict";a("f3ae")},"1b62":function(t,e,a){"use strict";var i=a("03e8");e["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.init()},handleCurrentChange:function(t){this.page.currentPage=t,this.init()}},computed:{headers:function(){var t=Object(i["b"])(),e={token:t};return e}}}},"80f9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"category_main p_bottom",attrs:{"element-loading-text":t.loadingOption.text,"element-loading-spinner":t.loadingOption.spinner,"element-loading-background":t.loadingOption.background}},[a("el-card",{staticClass:"card",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleImgSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传素材")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),a("el-row",{attrs:{gutter:20}},t._l(t.materialList,(function(e){return a("el-col",{key:e.id,staticStyle:{"margin-bottom":"20px",width:"20%"}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"materil_text"},[t._v(" 创建时间:"+t._s(e.createTime))])]),a("el-image",{staticStyle:{width:"100%",height:"250px"},attrs:{"preview-src-list":t.imgList,src:e.ossUrl,alt:""}}),a("div",{staticClass:"flexRight"},[a("el-button",{staticStyle:{width:"90px","margin-top":"20px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.goDel(e.id)}}},[t._v("刪除")])],1)],1)],1)})),1)],1),a("el-pagination",{staticClass:"margin_30",attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],s=(a("d81d"),a("99af"),a("b775"));function r(t,e){return Object(s["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e)})}function l(t){return Object(s["a"])({url:"/lejuAdmin/material/delMaterial/".concat(t),method:"DELETE"})}var o=a("1b62"),c={name:"MaterialList",mixins:[o["a"]],data:function(){return{pageLoading:!1,imgList:[],materialList:[]}},created:function(){this.getMaterialList()},methods:{goDel:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l(t).then((function(t){t.success?(e.getMaterialList(),e.$message.success("成功删除")):e.$message.error(t.message)}))})).catch((function(t){console.log(t)}))},getMaterialList:function(){var t=this;this.pageLoading=!0,r(this.page.currentPage,this.page.size).then((function(e){e.success?(t.imgList=e.data.rows.map((function(t){return t.ossUrl})),t.materialList=e.data.rows,t.page.total=e.data.total):t.$message.error("获取列表失败"),t.pageLoading=!1}))},handleImgSuccess:function(t,e,a){console.log(t),t.success?(this.$refs.materialUpload.clearFiles(),this.getMaterialList()):this.$message.error("素材上传失败")},handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.getMaterialList()},handleCurrentChange:function(t){this.page.currentPage=t,this.getMaterialList()}}},g=c,u=(a("0b20"),a("2877")),d=Object(u["a"])(g,i,n,!1,null,"fd050f8c",null);e["default"]=d.exports},f3ae:function(t,e,a){}}]);