(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f6136ed"],{"02cf":function(t,e,i){},"1b62":function(t,e,i){"use strict";var o=i("03e8");e["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.init()},handleCurrentChange:function(t){this.page.currentPage=t,this.init()}},computed:{headers:function(){var t=Object(o["b"])(),e={token:t};return e}}}},5278:function(t,e,i){"use strict";i("02cf")},"5eba":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addGoods"},[i("div",{staticClass:"step_main"},[i("el-steps",{staticClass:"step-bar",attrs:{active:t.step,"finish-status":"success"}},[i("el-step",{attrs:{title:"商品基本信息"}}),i("el-step",{attrs:{title:"添加库存信息"}}),i("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"main margin_30"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",inline:!1,size:"normal",rules:t.rules}},[1==t.step?i("div",{staticClass:"basic"},[i("p",[t._v("基本信息")]),i("el-divider"),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"商品名称 ",prop:"product.name"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini"},model:{value:t.form.product.name,callback:function(e){t.$set(t.form.product,"name",e)},expression:"form.product.name"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"商品编码 ",prop:"product.productSn"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini"},model:{value:t.form.product.productSn,callback:function(e){t.$set(t.form.product,"productSn",e)},expression:"form.product.productSn"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"商品分类"}},[i("el-select",{attrs:{placeholder:"",clearable:"",filterable:""},on:{change:t.getKindName},model:{value:t.form.product.productCategoryId,callback:function(e){t.$set(t.form.product,"productCategoryId",e)},expression:"form.product.productCategoryId"}},t._l(t.kindList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),i("el-form-item",{attrs:{label:"商品品牌"}},[i("el-select",{attrs:{placeholder:"",clearable:"",filterable:""},on:{change:t.getfindAllBrand},model:{value:t.form.product.brandId,callback:function(e){t.$set(t.form.product,"brandId",e)},expression:"form.product.brandId"}},t._l(t.findAllBrand,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"商品描述"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini",type:"textarea",rows:1,placeholder:"商品描述"},model:{value:t.form.product.description,callback:function(e){t.$set(t.form.product,"description",e)},expression:"form.product.description"}})],1),i("p",[t._v("商品属性")]),i("el-divider"),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[t._v(" 商品原价: "),i("el-input-number",{attrs:{min:1,size:"medium"},model:{value:t.form.product.originalPrice,callback:function(e){t.$set(t.form.product,"originalPrice",e)},expression:"form.product.originalPrice"}})],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"促销类型",size:"small"}},[i("el-select",{staticClass:"myInput",attrs:{placeholder:"促销类型",clearable:"",disabled:""},model:{value:t.form.product.promotionType,callback:function(e){t.$set(t.form.product,"promotionType",e)},expression:"form.product.promotionType"}},t._l(t.promotionTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[t._v(" 活动价格:"),i("el-input-number",{attrs:{disabled:!0},model:{value:t.form.product.originalPrice,callback:function(e){t.$set(t.form.product,"originalPrice",e)},expression:"form.product.originalPrice"}})],1)],1),t._v(" 重量(kg):"),i("el-input-number",{staticStyle:{"margin-top":"10px"},attrs:{min:1},model:{value:t.form.product.weight,callback:function(e){t.$set(t.form.product,"weight",e)},expression:"form.product.weight"}}),i("el-row",{staticClass:"margin_t"},[i("el-col",{attrs:{span:12}},[t._v(" 审核状态 : "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:t.form.product.verifyStatus,callback:function(e){t.$set(t.form.product,"verifyStatus",e)},expression:"form.product.verifyStatus"}})],1),i("el-col",{attrs:{span:12}},[t._v(" 是否上架 : "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:t.form.product.publishStatus,callback:function(e){t.$set(t.form.product,"publishStatus",e)},expression:"form.product.publishStatus"}})],1)],1),i("el-form-item",{attrs:{label:"缩略图",prop:"product.pic"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleImgSuccess}},[t.form.product.pic?i("img",{staticClass:"avatar",attrs:{src:t.form.product.pic}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("p",[t._v("其他信息")]),i("el-divider"),i("el-row",{staticClass:"margin_t"},[i("el-col",{attrs:{span:8}},[t._v(" 推荐状态 : "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:t.form.product.recommendStatus,callback:function(e){t.$set(t.form.product,"recommendStatus",e)},expression:"form.product.recommendStatus"}})],1),i("el-col",{attrs:{span:8}},[t._v(" 新品状态 : "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:t.form.product.newStatus,callback:function(e){t.$set(t.form.product,"newStatus",e)},expression:"form.product.newStatus"}})],1),i("el-col",{attrs:{span:8}},[t._v(" 预告商品 : "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:t.form.product.previewStatus,callback:function(e){t.$set(t.form.product,"previewStatus",e)},expression:"form.product.previewStatus"}})],1)],1),i("el-row",{staticClass:"margin_t",attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"搜索关键词"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini",placeholder:"关键词"},model:{value:t.form.product.keywords,callback:function(e){t.$set(t.form.product,"keywords",e)},expression:"form.product.keywords"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"库存预警"}},[i("el-input-number",{attrs:{min:1,size:"medium"},model:{value:t.form.product.lowStock,callback:function(e){t.$set(t.form.product,"lowStock",e)},expression:"form.product.lowStock"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"商品排序"}},[i("el-input-number",{attrs:{min:1,size:"medium"},model:{value:t.form.product.sort,callback:function(e){t.$set(t.form.product,"sort",e)},expression:"form.product.sort"}})],1)],1)],1),i("el-row",[i("el-col",{staticClass:"el-cols",attrs:{span:24}},[t._v(" 产品服务: "),i("el-checkbox-group",{staticStyle:{"padding-left":"10px"},model:{value:t.serviceIds,callback:function(e){t.serviceIds=e},expression:"serviceIds"}},[i("el-checkbox",{attrs:{label:"1",name:"type"}},[t._v("无忧退货")]),i("el-checkbox",{attrs:{label:"2",name:"type"}},[t._v("快速退款")]),i("el-checkbox",{attrs:{label:"3",name:"type"}},[t._v("免费包邮")])],1)],1)],1)],1):2==t.step?i("div",{staticClass:"sku"},[i("h3",[t._v("商品sku信息")]),i("el-divider"),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"标题",prop:"product.detailTitle"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini"},model:{value:t.form.product.detailTitle,callback:function(e){t.$set(t.form.product,"detailTitle",e)},expression:"form.product.detailTitle"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"副标题",prop:"product.subTitle"}},[i("el-input",{staticClass:"width_300",attrs:{size:"mini"},model:{value:t.form.product.subTitle,callback:function(e){t.$set(t.form.product,"subTitle",e)},expression:"form.product.subTitle"}})],1)],1)],1),i("div",{staticClass:"imagescol margin_t"},[i("span",{staticStyle:{"margin-right":"20px"}},[t._v("画册图片:")]),i("el-upload",{attrs:{action:t.uploadUrl,headers:t.headers,"list-type":"picture-card","file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleImg,limit:5,"on-exceed":t.handleExceed}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件,且不超过500kb, "),i("span",{staticStyle:{color:"red"}},[t._v("不能超过5张!")])])]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),i("el-form-item",{staticClass:"margin_t",attrs:{label:"sku设置"}},[t.colorList.length>0?i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24,offset:0}},[t._v(" 颜色："),t._l(t.colorList,(function(e){return i("el-checkbox",{key:e.value,model:{value:e.isSelected,callback:function(i){t.$set(e,"isSelected",i)},expression:"item.isSelected"}},[t._v(t._s(e.value)+" "),i("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(i){return t.delParam(e,"colorList")}}},[t._v("删除")])],1)}))],2)],1):t._e(),t.sizeList.length>0?i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24,offset:0}},[t._v(" 大小: "),t._l(t.sizeList,(function(e){return i("el-checkbox",{key:e.value,staticStyle:{"margin-left":"5px"},model:{value:e.isSelected,callback:function(i){t.$set(e,"isSelected",i)},expression:"item.isSelected"}},[t._v(t._s(e.value)+" "),i("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(i){return t.delParam(e,"sizeList")}}},[t._v("删除")])],1)}))],2)],1):t._e(),i("div",{staticClass:"content"},[i("div",{staticClass:"left"},[i("el-input",{attrs:{placeholder:"例如:土豪金",size:"mini",clearable:""},model:{value:t.iptColor,callback:function(e){t.iptColor=e},expression:"iptColor"}}),i("el-button",{staticClass:"colorBtn",attrs:{type:"primary",size:"mini"},on:{click:t.addColor}},[t._v("创建颜色选项")]),i("el-input",{attrs:{size:"mini",placeholder:"例如:64g",clearable:""},model:{value:t.iptSize,callback:function(e){t.iptSize=e},expression:"iptSize"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSize}},[t._v("创建大小选项")])],1),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSku}},[t._v("生成sku")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.ceatedsku}},[t._v("新增sku")])],1)])],1),i("el-table",{attrs:{data:t.form.pmsSkuStockList,border:"",stripe:""}},[i("el-table-column",{attrs:{label:"#",type:"index",fixed:"left"}}),i("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-upload",{staticClass:"upload-demo",attrs:{action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss","on-success":function(i){return t.aa(i,e.row)},headers:t.token}},[e.row.pic?i("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic}}):i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.btnEvents(e.row)}}},[t._v("点击上传")])],1)]}}])}),i("el-table-column",{attrs:{prop:"",label:"颜色"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[0].value,callback:function(i){t.$set(e.row.spData[0],"value",i)},expression:"scope.row.spData[0].value"}})]}}])}),i("el-table-column",{attrs:{prop:"",label:"大小"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[1]?i("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[1].value,callback:function(i){t.$set(e.row.spData[1],"value",i)},expression:"scope.row.spData[1].value"}}):t._e()]}}])}),i("el-table-column",{attrs:{prop:"stock",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"自定义库存",size:"normal",clearable:""},model:{value:e.row.stock,callback:function(i){t.$set(e.row,"stock",i)},expression:"scope.row.stock"}})]}}])}),i("el-table-column",{attrs:{label:"预警库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"预警库存",size:"normal",clearable:""},model:{value:e.row.lowStock,callback:function(i){t.$set(e.row,"lowStock",i)},expression:"scope.row.lowStock"}})]}}])}),i("el-table-column",{attrs:{label:"锁定库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"锁定库存",size:"normal",clearable:""},model:{value:e.row.lockStock,callback:function(i){t.$set(e.row,"lockStock",i)},expression:"scope.row.lockStock"}})]}}])}),i("el-table-column",{attrs:{label:"sku编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"sku编码",size:"normal",clearable:""},model:{value:e.row.skuCode,callback:function(i){t.$set(e.row,"skuCode",i)},expression:"scope.row.skuCode"}})]}}])}),i("el-table-column",{attrs:{label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"",size:"normal",clearable:""},model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}})]}}])}),i("el-table-column",{attrs:{label:"销量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"销量啊喂,当然是越多越好了",size:"normal",clearable:""},model:{value:e.row.sale,callback:function(i){t.$set(e.row,"sale",i)},expression:"scope.row.sale"}})]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(i){return i.preventDefault(),t.deleteRow(e.$index,t.form.pmsSkuStockList)}}},[t._v("删除")])]}}])})],1)],1):i("div",{staticClass:"info"},[i("p",[t._v("详情描述")]),i("el-divider"),t._v(" 商品详情: "),i("TEditor",{ref:"tin",model:{value:t.form.product.detailMobileHtml,callback:function(e){t.$set(t.form.product,"detailMobileHtml",e)},expression:"form.product.detailMobileHtml"}}),i("el-form-item",{attrs:{label:"备注",size:"small"}},[i("el-input",{staticClass:"myInput",attrs:{type:"textarea",placeholder:"备注"},model:{value:t.form.product.note,callback:function(e){t.$set(t.form.product,"note",e)},expression:"form.product.note"}})],1)],1),i("div",{staticClass:"bottom_main"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.step>1,expression:"step > 1"}],staticClass:"submit_button",attrs:{size:"small"},on:{click:t.preBtn}},[t._v("返回上一步 ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.step<3,expression:"step < 3"}],staticClass:"submit_button",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.nextBtn("form")}}},[t._v(t._s(t.nextBtnText)+" ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.step,expression:"step == 3"}],staticClass:"submit_button",attrs:{size:"small",type:"primary"},on:{click:t.onSubmit}},[t._v("提交保存")])],1)])],1)])],1)},r=[],n=i("5530"),a=(i("d3b7"),i("159b"),i("ac1f"),i("1276"),i("7db0"),i("b0c0"),i("4de4"),i("99af"),i("a434"),i("e9c4"),i("a15b"),i("d81d"),i("8256")),s=i("89db"),l=i("c45c"),c=i("03e8"),u=i("1b62"),d={mixins:[u["a"]],components:{TEditor:a["a"]},data:function(){return{id:"",step:1,token:{token:Object(c["b"])()},current:{},kindList:[],findAllBrand:[],dialogImageUrl:"",dialogVisible:!1,iptColor:"",iptSize:"",colorList:[],sizeList:[],show:!1,fileList:[],promotionTypeList:[{name:"没有促销使用原价",id:0},{name:"使用促销价",id:1},{name:"使用会员价",id:2},{name:"使用阶梯价格",id:3},{name:"使用满减价格",id:4},{name:"限时购",id:5}],serviceIds:[],form:{pmsSkuStockList:[],product:{albumPics:[],brandId:"",brandName:"",createTime:"",deleteStatus:"",description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:"",giftGrowth:"",giftPoint:"",id:"",keywords:"",lowStock:"",modifyTime:"",name:"",newStatus:"",note:"",originalPrice:"",pic:"",previewStatus:"",price:"",productAttributeCategoryId:"",productCategoryId:"",productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:"",promotionPrice:"",promotionStartTime:"",promotionType:"",publishStatus:"",recommendStatus:"",sale:"",sort:"",stock:"",subTitle:"",unit:"",usePointLimit:"",verifyStatus:"",weight:"",serviceIds:[]}},rules:{"product.name":[{required:!0,message:"请输入活动名称",trigger:"blur"}],"product.productSn":[{required:!0,message:"请输入商品编码",trigger:"blur"}],"product.pic":[{required:!0,message:"请上传缩略图"}],"product.detailTitle":[{required:!0,message:"请填写标题",trigger:"blur"}],"product.subTitle":[{required:!0,message:"请填写副标题",trigger:"blur"}]}}},computed:{nextBtnText:function(){var t="";switch(this.step){case 1:t="下一步,填写库存信息";break;case 2:t="下一步,填写移动端详情";break;default:break}return t}},created:function(){this.id=this.$route.params.id,this.id&&this.getproductSkusDetail(),this.init()},mounted:function(){},methods:{getproductSkusDetail:function(){var t=this;Object(s["d"])(this.id).then((function(e){if(t.form.product=e.data.product,e.data.skus.forEach((function(e){t.form.pmsSkuStockList.push(Object(n["a"])(Object(n["a"])({},e),{},{spData:JSON.parse(e.spData)}))})),t.form.product.albumPics){var i=t.form.product.albumPics.split(",");i.forEach((function(e){t.fileList.push({url:e})}))}t.form.product.serviceIds&&t.form.product.serviceIds.length>0&&(t.serviceIds=t.form.product.serviceIds.split(","))})).catch((function(e){t.$message.error(e)}))},init:function(){var t=this;Object(l["a"])().then((function(e){t.kindList=e.data.items.find((function(t){return"乐居"==t.category.name})).children})),Object(s["c"])().then((function(e){t.findAllBrand=e.data.items}))},handleImgSuccess:function(t,e,i){console.log(t),t.success?this.form.product.pic=t.data.fileUrl:this.$message.error("素材上传失败")},handleImg:function(t,e,i){console.log(t),t.success?(this.fileList.push({url:t.data.fileUrl}),this.$message.success("上传成功")):this.$message.error("素材上传失败")},handleRemove:function(t,e){this.form.product.albumPics=this.form.product.albumPics.filter((function(e){return e.url!=t.url}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,e){this.$message.warning("当前限制上传超过 5 个文件，本次上传选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},saveGoods:function(){Object(s["a"])(this.form).then((function(t){console.log(t)}))},deleteRow:function(t,e){e.splice(t,1)},btnEvents:function(t){console.log(t),this.current=t},tableEvents:function(t){console.log(t)},aa:function(t,e){console.log(t,e),e.pic=t.data.fileUrl},getUploadImg:function(t){console.log(t),this.current.pic=t.data.fileUrl},addSku:function(){var t=this;this.colorList.length<=0&&this.sizeList.length<=0?this.$message.error("请选中颜色大小"):this.$confirm("此操作将清空sku列表,并生成新的列表, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.form.pmsSkuStockList=[],t.show=!t.show;var e=t.colorList.filter((function(t){return t.isSelected})),i=t.sizeList.filter((function(t){return t.isSelected}));e.forEach((function(e){i.forEach((function(i){var o={createTime:"",id:"",lockStock:"",lowStock:"",modifyTime:"",pic:"",price:"",productId:"",promotionPrice:"",sale:"",skuCode:"",spData:[{key:"颜色",value:e.value},{key:"容量",value:i.value}],stock:""};t.form.pmsSkuStockList.push(o)}))})),t.$message({type:"success",message:"创建成功!"})}))},ceatedsku:function(){if(this.colorList.length<=0&&this.sizeList.length<=0)this.$message.error("请选中颜色大小");else{var t={createTime:"",id:"",lockStock:"",lowStock:"",modifyTime:"",pic:"",price:"",productId:"",promotionPrice:"",sale:"",skuCode:"",spData:[{key:"颜色",value:""},{key:"容量",value:""}],stock:""};this.form.pmsSkuStockList.push(t)}},delParam:function(t,e){console.log(t,e),this[e]=this[e].filter((function(e){return e.value!=t.value}))},addColor:function(){this.colorList.push({value:this.iptColor,isSelected:!1}),this.iptColor=""},addSize:function(){this.sizeList.push({value:this.iptSize,isSelected:!1}),this.iptSize=""},getKindName:function(t){console.log(t),this.form.product.productCategoryName=this.kindList.find((function(e){return e.id==t})).name},getfindAllBrand:function(t){this.form.product.brandName=this.findAllBrand.find((function(e){return e.id==t})).name},preBtn:function(){this.step--},nextBtn:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return""==e.form.name||""==e.form.pic?e.$message.error("请填写通知名称或缩略图"):e.$message.error("请按提示填写正确内容"),!1;e.step++}))},onSubmit:function(){var t=this,e=[];if(this.form.pmsSkuStockList.forEach((function(t){e.push(Object(n["a"])(Object(n["a"])({},t),{},{spData:JSON.stringify(t.spData)}))})),this.form.pmsSkuStockList=e,this.form.product.serviceIds=this.serviceIds.join(","),this.id)Object(s["k"])(this.form).then((function(e){e.success&&(t.$message.success("修改成功"),t.$router.push({name:"productlist"}))})).catch((function(e){console.log(e),t.$message.error("添加失败")}));else{var i=this.fileList.map((function(t){return t.url}));this.form.product.albumPics=i.join(","),Object(s["a"])(this.form).then((function(e){e.success&&(t.$message.success("新增成功"),t.$router.push({name:"productlist"}))})).catch((function(e){console.log(e),t.$message.error("添加失败")}))}}}},p=d,m=(i("aa3f"),i("2877")),f=Object(m["a"])(p,o,r,!1,null,"06553f61",null);e["default"]=f.exports},"7db0":function(t,e,i){"use strict";var o=i("23e7"),r=i("b727").find,n=i("44d2"),a=i("ae40"),s="find",l=!0,c=a(s);s in[]&&Array(1)[s]((function(){l=!1})),o({target:"Array",proto:!0,forced:l||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(s)},"80cf":function(t,e,i){},8256:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}})])},r=[],n=(i("b680"),i("a9e3"),i("ac1f"),i("00b4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),a=[],s=(i("d3b7"),i("b64b"),i("d81d"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,o=Object.keys(this.listObj),r=0,n=o.length;r<n;r++)if(this.listObj[o[r]].uid===i)return this.listObj[o[r]].url=t.files.file,void(this.listObj[o[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),o=0,r=i.length;o<r;o++)if(this.listObj[i[o]].uid===e)return void delete this.listObj[i[o]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,o=t.uid;return this.listObj[o]={},new Promise((function(r,n){var a=new Image;a.src=i.createObjectURL(t),a.onload=function(){e.listObj[o]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),l=s,c=(i("5278"),i("2877")),u=Object(c["a"])(l,n,a,!1,null,"3dae379b",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=i("b85c"),v=[];function g(){return window.tinymce}var k=function(t,e){var i=document.getElementById(t),o=e||function(){};if(!i){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),v.push(o);var n="onload"in r?a:s;n(r)}function a(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(b["a"])(v);try{for(i.s();!(t=i.n()).done;){var o=t.value;o(null,e)}}catch(r){i.e(r)}finally{i.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,o(new Error("Failed to load "+t),e)}}function s(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(b["a"])(v);try{for(i.s();!(e=i.n()).done;){var o=e.value;o(null,t)}}catch(r){i.e(r)}finally{i.f()}v=null}}}i&&o&&(g()?o(null,i):v.push(o))},y=k,w=i("b63a"),S="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",_={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;y(S,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,i,o,r){r(0);var n=new FormData;n.append("file",t.blob()),Object(w["g"])(n).then((function(t){t.success?(i(t.data.fileUrl),r(100)):(e.$message.error("上传失败,请重新上传"),r(100))}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(t,'" >'))}}},j=_,C=(i("ecde"),Object(c["a"])(j,o,r,!1,null,"4ed0cef5",null));e["a"]=C.exports},"89db":function(t,e,i){"use strict";i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"g",(function(){return l})),i.d(e,"h",(function(){return c})),i.d(e,"i",(function(){return u})),i.d(e,"j",(function(){return d})),i.d(e,"k",(function(){return p})),i.d(e,"d",(function(){return m})),i.d(e,"a",(function(){return f}));i("99af");var o=i("b775");function r(t,e,i){return Object(o["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:i})}function n(){return Object(o["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function a(t){return Object(o["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"DELETE"})}function s(t){return Object(o["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/lejuAdmin/product/switchPreviewStatus",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t)})}function f(t){return Object(o["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}},"92ec":function(t,e,i){},a15b:function(t,e,i){"use strict";var o=i("23e7"),r=i("44ad"),n=i("fc6a"),a=i("a640"),s=[].join,l=r!=Object,c=a("join",",");o({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(n(this),void 0===t?",":t)}})},a434:function(t,e,i){"use strict";var o=i("23e7"),r=i("23cb"),n=i("a691"),a=i("50c4"),s=i("7b0b"),l=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var i,o,u,d,p,m,g=s(this),k=a(g.length),y=r(t,k),w=arguments.length;if(0===w?i=o=0:1===w?(i=0,o=k-y):(i=w-2,o=h(f(n(e),0),k-y)),k+i-o>b)throw TypeError(v);for(u=l(g,o),d=0;d<o;d++)p=y+d,p in g&&c(u,d,g[p]);if(u.length=o,i<o){for(d=y;d<k-o;d++)p=d+o,m=d+i,p in g?g[m]=g[p]:delete g[m];for(d=k;d>k-o+i;d--)delete g[d-1]}else if(i>o)for(d=k-o;d>y;d--)p=d+o-1,m=d+i-1,p in g?g[m]=g[p]:delete g[m];for(d=0;d<i;d++)g[d+y]=arguments[d+2];return g.length=k-o+i,u}})},aa3f:function(t,e,i){"use strict";i("80cf")},b63a:function(t,e,i){"use strict";i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return c})),i.d(e,"g",(function(){return u}));i("99af");var o=i("b775");function r(t,e,i){return Object(o["a"])({url:"/lejuAdmin/productArticle/findArticles/".concat(t,"/").concat(e),method:"POST",data:i})}function n(t){return Object(o["a"])({url:"/lejuAdmin/productArticle/changeShowStatus",method:"POST",data:t})}function a(t){return Object(o["a"])({url:"/lejuAdmin/productArticle/del/".concat(t),method:"DELETE"})}function s(t){return Object(o["a"])({url:"/lejuAdmin/productArticle/addArticle",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/lejuAdmin/productArticle/productArticle/".concat(t)})}function c(t){return Object(o["a"])({url:"/lejuAdmin/productArticle/updateArticle",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"POST",data:t})}},c45c:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return n}));var o=i("b775");function r(){return Object(o["a"])({url:"/lejuAdmin/category/getAllCategory"})}function n(t){return Object(o["a"])({url:"/lejuAdmin/category/updateCategory",method:"post",data:t})}},ecde:function(t,e,i){"use strict";i("92ec")}}]);