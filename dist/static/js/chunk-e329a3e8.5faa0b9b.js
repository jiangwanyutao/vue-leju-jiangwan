(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e329a3e8"],{"1b62":function(t,e,a){"use strict";var n=a("03e8");e["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(t){this.page.size=t,this.page.currentPage=1,this.init()},handleCurrentChange:function(t){this.page.currentPage=t,this.init()}},computed:{headers:function(){var t=Object(n["b"])(),e={token:t};return e}}}},3013:function(t,e,a){"use strict";a("786d")},"786d":function(t,e,a){},c45c:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("b775");function r(){return Object(n["a"])({url:"/lejuAdmin/category/getAllCategory"})}function s(t){return Object(n["a"])({url:"/lejuAdmin/category/updateCategory",method:"post",data:t})}},fb69:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kind p_bottom"},[a("el-card",{staticClass:"card margin_30",attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("分类管理")])]),a("div",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("乐居分类:")]),a("el-row",{attrs:{gutter:20}},t._l(t.categoryList,(function(e){return a("el-col",{key:e.id,staticStyle:{"margin-bottom":"20px"},attrs:{span:6,offset:0}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.name))])]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleImgSuccess}},[e.icon?a("img",{staticStyle:{width:"100%",height:"300px"},attrs:{src:e.icon,alt:""},on:{click:function(a){return t.selectCategory(e)}}}):a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.selectCategory(e)}}},[t._v("上传图片")])],1)],1)],1)})),1),a("div",{staticClass:"title"},[t._v("全部分类:")]),a("el-table",{staticStyle:{margin:"30px auto"},attrs:{data:t.tableData,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"菜单名称",width:"150",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"icon",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"innerImg",attrs:{src:t.row.icon,alt:""}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"分类名字",prop:"name",width:"180"}}),a("el-table-column",{attrs:{align:"center",label:"排序",prop:"sort",width:"120"}}),a("el-table-column",{attrs:{align:"center",label:"显示状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.showStatus?"显示":"不显示"))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"导航栏展示",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.navStatus?"展示":"不展示"))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"描述",prop:"description"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"190"}})],1)],1)],1)},r=[],s=(a("d81d"),a("d3b7"),a("159b"),a("b0c0"),a("c45c")),i=a("1b62"),c={name:"ProductCategory",mixins:[i["a"]],data:function(){return{categoryList:[],selectedItem:{},tableData:[]}},created:function(){this.getCategoryList()},methods:{getCategoryList:function(){var t=this;Object(s["a"])().then((function(e){e.success?(t.tableData=e.data.items.map((function(t){var e=t.category;return e.children=t.children,e})),e.data.items.forEach((function(e){"乐居"===e.category.name&&(t.categoryList=e.children)}))):t.$message.error("获取数据失败")})).catch((function(e){t.$message.error("获取数据失败")}))},selectCategory:function(t){this.selectedItem=Object.assign({},t)},handleImgSuccess:function(t){var e=this;t.success?this.$confirm("确认修改图片?").then((function(){Object(s["b"])({id:e.selectedItem.id,level:e.selectedItem.level,parentId:e.selectedItem.parentId,icon:t.data.fileUrl}).then((function(t){console.log("rresultes"),t.success?(e.$message.success("修改成功!"),e.getCategoryList()):e.$message.error(t.message)}))})):this.$message.error("上传通用接口失败")}}},l=c,o=(a("3013"),a("2877")),u=Object(o["a"])(l,n,r,!1,null,"c20a8a80",null);e["default"]=u.exports}}]);