(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24089c81"],{"1b62":function(e,t,r){"use strict";var a=r("03e8");t["a"]={data:function(){return{start:1,limit:10,page:{currentPage:1,size:10,total:0,pageSizes:[10,20,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"拼了老命加载中.....",spinner:"el-icon-loading"},uploadUrl:"/lejuAdmin/material/uploadFileOss"}},methods:{handleSizeChange:function(e){this.page.size=e,this.page.currentPage=1,this.init()},handleCurrentChange:function(e){this.page.currentPage=e,this.init()}},computed:{headers:function(){var e=Object(a["b"])(),t={token:e};return t}}}},"5fc4":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return o}));r("99af");var a=r("b775");function i(e,t,r){return Object(a["a"])({url:"/lejuAdmin/order/findOrdersByPage/".concat(e,"/").concat(t),method:"post",data:r})}function s(e){return Object(a["a"])({url:"/lejuAdmin/order/orderDetail/".concat(e)})}function n(e){return Object(a["a"])({url:"/lejuAdmin/order/sendDone",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/lejuAdmin/order/receiveProductsForce/".concat(e),method:"post"})}},"85d9":function(e,t,r){"use strict";r("a3d7")},a3d7:function(e,t,r){},bfb7:function(e){e.exports=JSON.parse('{"EBusinessID":"1109259","OrderCode":"","ShipperCode":"EMS","LogisticCode":"5042260908504","Success":true,"Reason":"","State":"2","CallBack":"0","Traces":[{"AcceptTime":"2015-03-06 21:16:58","AcceptStation":"深圳市横岗速递营销部已收件","Remark":"揽投员姓名：钟定基;联系电话：13883838888"},{"AcceptTime":"2015-03-07 14:25:00","AcceptStation":"离开深圳市 发往广州市","Remark":""},{"AcceptTime":"2015-03-08 00:17:00","AcceptStation":"到达广东速递物流公司广航中心处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-08 01:15:00","AcceptStation":"离开广州市 发往北京市（经转）","Remark":""},{"AcceptTime":"2015-03-09 09:01:00","AcceptStation":"到达北京黄村转运站处理中心（经转）","Remark":""},{"AcceptTime":"2015-03-09 18:39:00","AcceptStation":"离开北京市 发往呼和浩特市（经转）","Remark":""},{"AcceptTime":"2015-03-10 18:06:00","AcceptStation":"到达  呼和浩特市 处理中心","Remark":""},{"AcceptTime":"2015-03-11 09:53:48","AcceptStation":"呼和浩特市邮政速递物流分公司金川揽投部安排投递","Remark":"投递员姓名：安长虹;联系电话：18047140142"}]}')},daa0:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail"},[e.info.orderBase?r("div",{staticClass:"table-main"},[r("el-steps",{staticClass:"margin_4",attrs:{active:e.activeStep,"align-center":""}},[r("el-step",{attrs:{title:"待付款",description:e.info.orderBase.createTime}}),r("el-step",{attrs:{title:"待发货",description:e.info.orderBase.paymentTime}}),r("el-step",{attrs:{title:"已发货",description:e.info.orderBase.deliveryTime}}),4!=e.info.orderBase.status?r("el-step",{attrs:{title:"已完成",description:e.info.orderBase.receiveTime}}):e._e(),3!=e.info.orderBase.status?r("el-step",{attrs:{title:"退货",description:e.info.orderBase.finishTime}}):e._e()],1),r("el-divider"),r("div",{staticClass:"table-title"},[e._v(" 订单信息: "),e.info.orderBase.createTime?r("span",{staticStyle:{"margin-left":"10px"}},[0===e.info.orderBase.status?r("el-tag",{attrs:{type:"danger",size:"small",effect:"dark"}},[e._v(" 待付款 ")]):1===e.info.orderBase.status?r("el-tag",{attrs:{size:"small",type:"warning",effect:"dark"}},[e._v("待发货")]):2===e.info.orderBase.status?r("el-tag",{attrs:{size:"small"}},[e._v(" 已发货 ")]):3===e.info.orderBase.status?r("el-tag",{attrs:{size:"small",effect:"dark"}},[e._v("已完成")]):4===e.info.orderBase.status?r("el-tag",{attrs:{size:"small",type:"info",effect:"dark"}},[e._v("退货")]):r("el-tag",{attrs:{type:"info",size:"small"}},[e._v(" 无效订单 ")])],1):e._e(),r("div",{staticClass:"orderlist"},[r("span",{staticStyle:{color:"red"}},[e._v("订单金额:"+e._s(e.info.orderBase.totalAmount))]),r("span",[e._v("订单编号:"+e._s(e.info.orderBase.orderSn))]),r("span",[e._v("用户账号:"+e._s(e.info.orderBase.memberUsername))]),r("span",[e._v("备注:"+e._s(e.info.orderBase.totalAmount))])]),r("div",{staticClass:"orderlist"},[r("span",[e._v("下单时间:"+e._s(e.info.orderBase.createTime))]),r("span",[e._v("付款时间:"+e._s(e.info.orderBase.paymentTime))]),r("span",[e._v("发货时间:"+e._s(e.info.orderBase.deliveryTime))]),r("span",[e._v(" 收货时间:"+e._s(e.info.orderBase.receiveTime))])])])],1):e._e(),r("el-divider"),r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[e._v("收货人信息:")]),e.info.orderBase?r("div",{staticClass:"orderlist"},[r("span",[e._v("收货人:"+e._s(e.info.orderBase.receiverName))]),r("span",[e._v("用户姓名:"+e._s(e.info.orderBase.memberUsername))]),r("span",[e._v("手机号码:"+e._s(e.info.orderBase.receiverPhone))]),r("span",[e._v("邮政编码:"+e._s(e.info.orderBase.receiverPostCode))])]):e._e(),e.info.orderBase?r("div",{staticClass:"orderlist"},[r("span",[e._v("地市:"+e._s(e.info.orderBase.receiverProvince)+e._s(e.info.orderBase.receiverCity))]),r("span",[e._v("详细地址:"+e._s(e.info.orderBase.receiverDetailAddress))])]):e._e()]),r("el-divider"),r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[e._v("商品信息:")]),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.orderItemList,border:""}},[r("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center"}}),r("el-table-column",{attrs:{prop:"productName",label:"商品图片",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.productPic,alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"isReturn",label:"是否退货",width:"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isReturn?r("span",{staticStyle:{color:"red",cursor:"pointer"},on:{click:function(r){return e.goReturn(t.row)}}},[e._v("是")]):r("span",[e._v("否")])]}}])}),r("el-table-column",{attrs:{prop:"productBrand",label:"品牌",width:"200px",align:"center"}}),r("el-table-column",{attrs:{prop:"productPrice",label:"价格",width:"200px",align:"center"}}),r("el-table-column",{attrs:{prop:"productQuantity",label:"商品数量",width:"200px",align:"center"}}),r("el-table-column",{attrs:{fixed:"right",prop:"totalPrice",label:"小计",width:"250px",align:"center"}})],1)],1),r("el-divider"),r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[e._v("费用信息:")]),e.info.orderBase?r("div",{staticClass:"orderlist"},[r("span",[e._v("运费金额:0")]),r("span",[e._v("订单总金额:"+e._s(e.info.orderBase.totalAmount))]),r("span",[e._v("实际金额:"+e._s(e.info.orderBase.payAmount))]),r("span",[e._v(" 促销优化金额:"+e._s(e.info.orderBase.promotionAmount?e.info.orderBase.promotionAmount:0))])]):e._e()]),r("el-divider"),e.activeStep>=3?r("div",{staticClass:"table-main"},[r("div",{staticClass:"table-title"},[e._v(" 物流信息: "),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.info.orderBase.deliveryCompany)+" [ "+e._s(e.info.orderBase.deliverySn)+" ]")])]),r("el-table",{staticStyle:{width:"100%","margin-top":"25px"},attrs:{data:e.expressData,border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"AcceptTime",label:"时间",width:"180"}}),r("el-table-column",{attrs:{prop:"AcceptStation",label:"状态"}}),r("el-table-column",{attrs:{prop:"Remark",label:"备注",width:"450"}})],1)],1):e._e(),r("el-divider"),r("el-form",{ref:"form",staticClass:"form-lable",attrs:{model:e.form,rules:e.rules,inline:!1,size:"mini"}},[2===e.activeStep?r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"deliveryCompany",label:"物流公司"}},[r("el-select",{staticClass:"myInput",attrs:{size:"mini",placeholder:"请选择物流公司",clearable:""},model:{value:e.form.deliveryCompany,callback:function(t){e.$set(e.form,"deliveryCompany",t)},expression:"form.deliveryCompany"}},e._l(e.options,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"deliverySn",label:"物流单号"}},[r("el-input",{staticClass:"myInput-el",attrs:{placeholder:"",size:"mini"},model:{value:e.form.deliverySn,callback:function(t){e.$set(e.form,"deliverySn",t)},expression:"form.deliverySn"}})],1)],1)],1):e._e()],1),r("div",{staticClass:"button_main"},[2===e.activeStep?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.sendOrder}},[e._v("确认发货")]):e._e(),r("div",[e.forceSendShow?r("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:e.forceFinishOrder}},[e._v(" 强制确认收货 ")]):e._e()],1)],1)],1)},i=[],s=(r("d3b7"),r("159b"),r("5fc4")),n=r("1b62"),o=r("bfb7"),l={name:"OrederList",mixins:[n["a"]],data:function(){return{activeStep:0,info:[],forceSendShow:!0,options:[{id:0,name:"顺丰快递"},{id:1,name:"韵达快递"},{id:2,name:"中国邮政"},{id:3,name:"申通快递"},{id:4,name:"中通快递"}],form:{deliverySn:"",deliveryCompany:""},rules:{deliveryCompany:[{required:!0,message:"请填写物流公司",trigger:"change"}],deliverySn:[{required:!0,message:"请填写物流单号",trigger:"blur"}]},orderItemList:[]}},computed:{expressData:function(){return o.Traces}},created:function(){this.id=this.$route.params.id,this.init()},methods:{goReturn:function(e){this.$router.push({name:"backDetail",params:{id:e.returnId}})},forceFinishOrder:function(){var e=this;Object(s["c"])(this.id).then((function(t){t.success?(e.$message.success("关闭订单成功"),window.location.reload()):e.$message.error("关闭订单失败")})).catch((function(t){e.$message.error("关闭订单失败")}))},sendOrder:function(){var e=this;this.$refs.form.validate((function(t){t?Object(s["d"])({orderId:e.id,deliverySn:e.form.deliverySn,deliveryCompany:e.form.deliveryCompany}).then((function(t){t.success?(window.location.reload(),e.$message.success("确认订单成功")):e.$message.error("确定订单失败")})).catch((function(t){e.$message.error("确认订单失败")})):e.$message.warning("请填写必要信息")}))},init:function(){var e=this;Object(s["b"])(this.id).then((function(t){t.success?(e.info=t.data.orderDetail,e.activeStep=t.data.orderDetail.orderBase.status+1,e.orderItemList=t.data.orderDetail.orderItems,e.judgeForce(),e.$message.success("获取数据成功")):e.$message.error("获取数据失败"),e.pageLoading=!1}))},judgeForce:function(){var e=this;this.orderItemList.forEach((function(t){0===t.isReturn&&(e.forceSendShow=!1)}))}}},c=l,d=(r("85d9"),r("2877")),p=Object(d["a"])(c,a,i,!1,null,"d54d9158",null);t["default"]=p.exports}}]);